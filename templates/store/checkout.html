{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="tt-breadcrumb">
	<div class="container">
		<ul>
			<li><a href="{% url 'home' %}">Home</a></li>
			<li>Checkout</li>
		</ul>
	</div>
</div>
<div id="tt-pageContent">
	<div class="container-indent">
		<div class="container">
			<h1 class="tt-title-subpages noborder">Place Order</h1>
			<div class="row">
				<div class="col-sm-12 col-xl-8">
					<div class="card">
						<form action="{% url 'place_order' %}" method="post">{% csrf_token %}
							<div class="form-group">
								<label for="">First Name</label>
								<input type="text" class="form-control"  name="first_name" />
							</div>

							<div class="form-group">
								<label for="">Last Name</label>
								<input type="text" class="form-control" name="last_name" />
							</div>

							<div class="form-group">
								<label for="">Email</label>
								<input type="text" class="form-control" name="email" />
							</div>

							<div class="form-group">
								<label for="">Address</label>
								<input type="text" class="form-control" name="address_line_1" />
							</div>

							<div class="form-group">
								<label for="">Zip/PostCodde</label>
								<input type="text" class="form-control" name="post_code" />
							</div>

							<div class="form-group">
								<label for="">Mobile Phone</label>
								<input type="text" class="form-control" name="phone" />
							</div>

							<button type="submit" class="btn btn-primary">Place Orders</button>

						</form>
					</div>
				</div>
				<div class="col-sm-12 col-xl-4">
						<div class="tt-shopcart-box tt-boredr-large">
							<table class="tt-shopcart-table01">
								<tbody>
									<tr>
										<th>SUBTOTAL</th>
										<td id="cart_total">$324</td>
									</tr>
								</tbody>
								<tfoot>
									<tr>
										<th>GRAND TOTAL</th>
										<td id="cart_grand_total">$324</td>
									</tr>
								</tfoot>
							</table>
							<a href="{% url 'checkout' %}" class="btn btn-lg"><span class="icon icon-check_circle"></span>PROCEED TO CHECKOUT</a>
						</div>
				</div>
			</div>
		</div>
	</div>
</div>
{% endblock %}

{% block scripts %}
{{ block.super }}

<script>

        fetch('{% url "cart_details" %}', {
            method: 'GET',
        })
        .then(response => response.json())
        .then(result => {
			console.log(result)

            $('#cart_total').text(result.total)
            $('#cart_tax').text(result.tax)
            $('#cart_discount').text(result.discount)
            $('#cart_grand_total').text(result.grand_total)
            $('#shipping_charge').text(result.shipping_charge);
        });

</script>

{% endblock %}